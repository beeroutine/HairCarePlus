<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.Views"
             xmlns:viewmodels="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.ViewModels"
             xmlns:tabview="clr-namespace:Syncfusion.Maui.TabView;assembly=Syncfusion.Maui.TabView"
             x:Class="HairCarePlus.Client.Patient.Features.Calendar.Views.CalendarPage"
             x:DataType="viewmodels:CalendarViewModel"
             Title="Календарь восстановления">

    <Grid RowDefinitions="Auto,*">
        <!-- Progress Section -->
        <Frame Grid.Row="0" 
               Margin="10"
               Padding="15"
               BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
               CornerRadius="10">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <Image Grid.Column="0"
                       Source="calendar.png"
                       HeightRequest="40"
                       WidthRequest="40"
                       VerticalOptions="Center"/>
                
                <VerticalStackLayout Grid.Column="1" 
                                   Spacing="5"
                                   Margin="10,0">
                    <Label Text="{Binding CurrentPhaseText}"
                           TextColor="White"
                           FontSize="18"/>
                    <Label Text="{Binding ProgressText}"
                           TextColor="White"
                           FontSize="14"/>
                    <ProgressBar Progress="{Binding ProgressValue}"
                                ProgressColor="White"/>
                </VerticalStackLayout>

                <Label Grid.Column="2"
                       Text="{Binding ProgressPercentage}"
                       TextColor="White"
                       FontSize="24"
                       FontAttributes="Bold"
                       VerticalOptions="Center"/>
            </Grid>
        </Frame>

        <!-- Calendar Views -->
        <tabview:SfTabView Grid.Row="1"
                          SelectedIndex="{Binding SelectedViewIndex}">
            <tabview:SfTabView.Items>
                <tabview:SfTabItem Header="Месяц">
                    <tabview:SfTabItem.Content>
                        <Grid>
                            <views:MonthView BindingContext="{Binding MonthViewModel}"/>
                        </Grid>
                    </tabview:SfTabItem.Content>
                </tabview:SfTabItem>
                <tabview:SfTabItem Header="Неделя">
                    <tabview:SfTabItem.Content>
                        <Grid>
                            <views:WeekView BindingContext="{Binding WeekViewModel}"/>
                        </Grid>
                    </tabview:SfTabItem.Content>
                </tabview:SfTabItem>
                <tabview:SfTabItem Header="Список">
                    <tabview:SfTabItem.Content>
                        <Grid>
                            <views:EventListView BindingContext="{Binding ListViewModel}"/>
                        </Grid>
                    </tabview:SfTabItem.Content>
                </tabview:SfTabItem>
            </tabview:SfTabView.Items>
        </tabview:SfTabView>
    </Grid>
</ContentPage> 