<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.Models"
             xmlns:viewmodels="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.ViewModels"
             x:Class="HairCarePlus.Client.Patient.Features.Calendar.Views.MonthCalendarView"
             CascadeInputTransparent="False">
    
    <ContentView.Resources>
        <ResourceDictionary>
            <Style x:Key="MonthHeaderStyle" TargetType="Label">
                <Setter Property="FontSize" Value="24" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
                <Setter Property="VerticalTextAlignment" Value="Center" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
            </Style>
            
            <Style x:Key="DayHeaderStyle" TargetType="Label">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />
            </Style>
            
            <Style x:Key="DayNumberStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
            </Style>
            
            <Style x:Key="NavigationButtonStyle" TargetType="Button">
                <Setter Property="FontSize" Value="24" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}" />
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="BorderWidth" Value="0" />
                <Setter Property="Padding" Value="12,0" />
            </Style>
            
            <Style x:Key="CalendarCellStyle" TargetType="Frame">
                <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}" />
                <Setter Property="BorderColor" Value="Transparent" />
                <Setter Property="Padding" Value="4" />
                <Setter Property="HasShadow" Value="False" />
                <Setter Property="MinimumHeightRequest" Value="48" />
            </Style>
            
            <Style x:Key="EventIndicatorsContainerStyle" TargetType="HorizontalStackLayout">
                <Setter Property="Spacing" Value="2" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="VerticalOptions" Value="End" />
                <Setter Property="Margin" Value="0,4,0,2" />
                <Setter Property="MinimumHeightRequest" Value="8" />
            </Style>

            <Style x:Key="EventDotBaseStyle" TargetType="BoxView">
                <Setter Property="HeightRequest" Value="6" />
                <Setter Property="WidthRequest" Value="6" />
                <Setter Property="CornerRadius" Value="3" />
                <Setter Property="Opacity" Value="0.8" />
            </Style>

            <Style x:Key="RestrictionDotStyle" TargetType="BoxView" BasedOn="{StaticResource EventDotBaseStyle}">
                <Setter Property="BackgroundColor" Value="#FF4B4B" />
            </Style>

            <Style x:Key="MedicationDotStyle" TargetType="BoxView" BasedOn="{StaticResource EventDotBaseStyle}">
                <Setter Property="BackgroundColor" Value="#2196F3" />
            </Style>

            <Style x:Key="PhotoDotStyle" TargetType="BoxView" BasedOn="{StaticResource EventDotBaseStyle}">
                <Setter Property="BackgroundColor" Value="#9C27B0" />
            </Style>

            <Style x:Key="InstructionDotStyle" TargetType="BoxView" BasedOn="{StaticResource EventDotBaseStyle}">
                <Setter Property="BackgroundColor" Value="#4CAF50" />
            </Style>
            
            <Style x:Key="ExcessEventsStyle" TargetType="Label">
                <Setter Property="FontSize" Value="10" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource TextSecondaryColor}, Dark={StaticResource Gray300}}" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="VerticalOptions" Value="End" />
                <Setter Property="Margin" Value="0,2,0,0" />
            </Style>
            
            <Style x:Key="OtherMonthDayStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray400}, Dark={StaticResource Gray600}}" />
                <Setter Property="Opacity" Value="0.5" />
                <Setter Property="FontSize" Value="14" />
            </Style>
            
            <Style x:Key="TodayCellStyle" TargetType="Border">
                <Setter Property="Stroke" Value="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource PrimaryDark}}" />
                <Setter Property="StrokeThickness" Value="2" />
                <Setter Property="StrokeShape" Value="RoundRectangle 20,20,20,20" />
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="WidthRequest" Value="36" />
                <Setter Property="HeightRequest" Value="36" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="VerticalOptions" Value="Center" />
            </Style>
            
            <Style x:Key="SelectedCellStyle" TargetType="Border">
                <Setter Property="Stroke" Value="Transparent" />
                <Setter Property="StrokeThickness" Value="0" />
                <Setter Property="StrokeShape" Value="RoundRectangle 20,20,20,20" />
                <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource PrimaryDark}}" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="WidthRequest" Value="36" />
                <Setter Property="HeightRequest" Value="36" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="VerticalOptions" Value="Center" />
            </Style>
        </ResourceDictionary>
    </ContentView.Resources>
    
    <Grid RowSpacing="0" ColumnSpacing="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок с месяцем и годом -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <Button Grid.Column="0" 
                    Text="‹"
                    Command="{Binding PreviousMonthCommand}"
                    Style="{StaticResource NavigationButtonStyle}"/>
            
            <Label Grid.Column="1" 
                   Text="{Binding CurrentMonthYear}"
                   Style="{StaticResource MonthHeaderStyle}"
                   HorizontalOptions="Center"/>
            
            <Button Grid.Column="2" 
                    Text="›"
                    Command="{Binding NextMonthCommand}"
                    Style="{StaticResource NavigationButtonStyle}"/>
        </Grid>

        <!-- Заголовки дней недели -->
        <Grid Grid.Row="1" ColumnSpacing="1" Margin="0,0,0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Label Grid.Column="0" Text="Вс" Style="{StaticResource DayHeaderStyle}"/>
            <Label Grid.Column="1" Text="Пн" Style="{StaticResource DayHeaderStyle}"/>
            <Label Grid.Column="2" Text="Вт" Style="{StaticResource DayHeaderStyle}"/>
            <Label Grid.Column="3" Text="Ср" Style="{StaticResource DayHeaderStyle}"/>
            <Label Grid.Column="4" Text="Чт" Style="{StaticResource DayHeaderStyle}"/>
            <Label Grid.Column="5" Text="Пт" Style="{StaticResource DayHeaderStyle}"/>
            <Label Grid.Column="6" Text="Сб" Style="{StaticResource DayHeaderStyle}"/>
        </Grid>

        <!-- Сетка календаря -->
        <Grid x:Name="CalendarGrid" 
              Grid.Row="2" 
              RowSpacing="1" 
              ColumnSpacing="1"
              BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray800}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
        </Grid>
    </Grid>
</ContentView> 