<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.Models"
             xmlns:viewmodels="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.ViewModels"
             x:Class="HairCarePlus.Client.Patient.Features.Calendar.Views.MonthCalendarView"
             HeightRequest="400"
             CascadeInputTransparent="False">
    
    <ContentView.Resources>
        <ResourceDictionary>
            <Style x:Key="MonthHeaderStyle" TargetType="Label">
                <Setter Property="FontSize" Value="20" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource TextPrimaryColor}, Dark={StaticResource White}}" />
            </Style>
            
            <Style x:Key="DayHeaderStyle" TargetType="Label">
                <Setter Property="FontSize" Value="12" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource TextSecondaryColor}, Dark={StaticResource Gray300}}" />
            </Style>
            
            <Style x:Key="DayNumberStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource TextPrimaryColor}, Dark={StaticResource White}}" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
                <Setter Property="VerticalTextAlignment" Value="Center" />
            </Style>
            
            <Style x:Key="NavigationButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource PrimaryDark}}" />
                <Setter Property="FontSize" Value="24" />
                <Setter Property="WidthRequest" Value="40" />
                <Setter Property="HeightRequest" Value="40" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="CornerRadius" Value="20" />
                <Setter Property="Visual" Value="Material" />
            </Style>
            
            <Style x:Key="CalendarCellStyle" TargetType="Frame">
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="BorderColor" Value="{AppThemeBinding Light={StaticResource BorderColor}, Dark={StaticResource Gray600}}" />
                <Setter Property="CornerRadius" Value="4" />
                <Setter Property="Padding" Value="4" />
                <Setter Property="Margin" Value="2" />
                <Setter Property="MinimumHeightRequest" Value="45" />
                <Setter Property="MinimumWidthRequest" Value="40" />
                <Setter Property="HasShadow" Value="False" />
                <Setter Property="BackgroundColor" Value="{AppThemeBinding Light=Transparent, Dark=#1C1C1E}" />
            </Style>
            
            <Style x:Key="EventDotStyle" TargetType="BoxView">
                <Setter Property="HeightRequest" Value="8" />
                <Setter Property="WidthRequest" Value="8" />
                <Setter Property="CornerRadius" Value="4" />
                <Setter Property="HorizontalOptions" Value="Center" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="Margin" Value="0,2,0,0" />
            </Style>
        </ResourceDictionary>
    </ContentView.Resources>
    
    <Grid RowDefinitions="Auto,Auto,*" Padding="0" RowSpacing="2" BackgroundColor="Transparent">
        <!-- Month Header -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto" Margin="0,0,0,2">
            <Button Grid.Column="0"
                    Text="‹"
                    Command="{Binding PreviousMonthCommand}"
                    Style="{StaticResource NavigationButtonStyle}" />
            
            <Label Grid.Column="1"
                   Text="{Binding CurrentMonthDate, StringFormat='{0:MMMM yyyy}'}"
                   Style="{StaticResource MonthHeaderStyle}"
                   HorizontalOptions="Center" />
            
            <Button Grid.Column="2"
                    Text="›"
                    Command="{Binding NextMonthCommand}"
                    Style="{StaticResource NavigationButtonStyle}" />
        </Grid>
        
        <!-- Day Headers -->
        <Grid Grid.Row="1" ColumnDefinitions="*,*,*,*,*,*,*" Margin="0,0,0,2" ColumnSpacing="1">
            <Label Grid.Column="0" Text="Sun" Style="{StaticResource DayHeaderStyle}" />
            <Label Grid.Column="1" Text="Mon" Style="{StaticResource DayHeaderStyle}" />
            <Label Grid.Column="2" Text="Tue" Style="{StaticResource DayHeaderStyle}" />
            <Label Grid.Column="3" Text="Wed" Style="{StaticResource DayHeaderStyle}" />
            <Label Grid.Column="4" Text="Thu" Style="{StaticResource DayHeaderStyle}" />
            <Label Grid.Column="5" Text="Fri" Style="{StaticResource DayHeaderStyle}" />
            <Label Grid.Column="6" Text="Sat" Style="{StaticResource DayHeaderStyle}" />
        </Grid>
        
        <!-- Calendar Days Grid -->
        <Grid x:Name="CalendarGrid" 
              Grid.Row="2" 
              RowDefinitions="*,*,*,*,*,*" 
              ColumnDefinitions="*,*,*,*,*,*,*"
              RowSpacing="2"
              ColumnSpacing="2"
              Margin="0,5,0,0"
              BackgroundColor="Transparent"
              CascadeInputTransparent="False"
              InputTransparent="False">
            <!-- Ячейки календаря будут добавлены программно в коде -->
        </Grid>
    </Grid>
</ContentView> 