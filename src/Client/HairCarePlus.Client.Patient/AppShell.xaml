<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="HairCarePlus.Client.Patient.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
    xmlns:calendar="clr-namespace:HairCarePlus.Client.Patient.Features.Calendar.Views"
    xmlns:chat="clr-namespace:HairCarePlus.Client.Patient.Features.Chat.Views"
    xmlns:photo="clr-namespace:HairCarePlus.Client.Patient.Features.PhotoCapture.Views"
    xmlns:progress="clr-namespace:HairCarePlus.Client.Patient.Features.Progress.Views"
    Shell.FlyoutBehavior="Disabled"
    Shell.NavBarIsVisible="False"
    ios:Page.UseSafeArea="False"
    Title="HairCarePlus">

    <Shell.Resources>
        <Style TargetType="Tab">
            <!-- Match horizontal calendar accent: Black in light theme, White in dark theme -->
            <Setter Property="Shell.TabBarBackgroundColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />
            <!-- Ensure contrast for selected tab title/icon -->
            <Setter Property="Shell.TabBarForegroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}" />
            <Setter Property="Shell.TabBarTitleColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}" />
            <Setter Property="Shell.TabBarUnselectedColor" Value="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />
        </Style>
    </Shell.Resources>

    <TabBar>
        <!-- Today - главная страница -->
        <Tab Title="Today">
            <ShellContent
                Title="Today"
                ContentTemplate="{DataTemplate calendar:TodayPage}"
                Route="today"
                Shell.NavBarIsVisible="False"
                Shell.TabBarIsVisible="True"
                Shell.FlyoutBehavior="Disabled"
                Shell.PresentationMode="ModalNotAnimated" />
        </Tab>

        <!-- Chat -->
        <Tab Title="Chat">
            <ShellContent
                Title="Chat"
                ContentTemplate="{DataTemplate chat:ChatPage}"
                Route="chat" />
        </Tab>

        <!-- Camera (central) -->
        <Tab Title="Camera">
            <ShellContent
                Title="Camera"
                ContentTemplate="{DataTemplate photo:PhotoCapturePage}"
                Route="camera">
                <ShellContent.Icon>
                    <FontImageSource FontFamily="MaterialIcons" Glyph="&#xE412;" Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" Size="24" />
                </ShellContent.Icon>
            </ShellContent>
        </Tab>

        <!-- Progress -->
        <Tab Title="Progress">
            <ShellContent
                Title="Progress"
                ContentTemplate="{DataTemplate progress:ProgressPage}"
                Route="progress" />
        </Tab>
    </TabBar>

</Shell>
